{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Friends Reunion Vendor Booking</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <style>

    body {
      background: url('{% static "assets/friends.jpg" %}') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Segoe UI', sans-serif;
    }

    .glass-header {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      color: white;
    }

    .glass-header h3, .glass-header a {
      text-shadow: 0 0 8px #000000;
    }

    .vendor-card {
      border-radius: 12px;
      background-color: #ffffffdd;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      transition: 0.3s ease;
    }

    .vendor-card:hover {
      transform: scale(1.02);
      box-shadow: 0 0 15px #0dcaf0;
    }

    .vendor-card img {
      width: 100%;
      height: 250px;
      object-fit: cover;
      border-radius: 10px;
    }

    .checklist-panel {
      position: fixed;
      top: 0;
      right: -400px;
      width: 350px;
      height: 100%;
      background: url('{% static "images/bg5.jpg" %}') no-repeat center center fixed;
      background-size: cover;
      border-left: 2px solid #ccc;
      box-shadow: -2px 0 10px rgba(0,0,0,0.1);
      padding: 20px;
      transition: right 0.4s ease-in-out;
      overflow-y: auto;
      z-index: 999;
      backdrop-filter: blur(10px);
    }
    html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}
    .checklist-panel.show {
      right: 0;
    }
    .popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: white;
  color: black;
  padding: 20px;
  border: 2px solid #444;
  border-radius: 10px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
  z-index: 1000;
  max-width: 400px;
  text-align: center;
}
.vendor-card {
  margin-bottom: 20px; /* Adds space between rows */
}

.d-none {
  display: none;
}

.about-content {
  margin-bottom: 10px;
  font-size: 16px;
  line-height: 1.5;
}

  </style>
</head>
<body>
  <script type="text/javascript">
    (function(d, t) {
        var v = d.createElement(t), s = d.getElementsByTagName(t)[0];
        v.onload = function() {
          window.voiceflow.chat.load({
            verify: { projectID: '680c7f66ad1fd33749d57a4a' },
            url: 'https://general-runtime.voiceflow.com',
            versionID: 'production',
            voice: {
              url: "https://runtime-api.voiceflow.com"
            }
          });
        }
        v.src = "https://cdn.voiceflow.com/widget-next/bundle.mjs"; v.type = "text/javascript"; s.parentNode.insertBefore(v, s);
    })(document, 'script');
  </script>


<header class="glass-header p-3 mb-4">
  <div class="container d-flex justify-content-between align-items-center">
    <h3><i class="bi bi-people-fill"></i> Friends Reunion</h3>
    <nav>
      <a class="text-white me-4" href="/backend/home/"><i class="bi bi-house-door"></i> Home</a>
      <a class="text-white me-4" href="javascript:void(0);" onclick="openAbout()"><i class="bi bi-info-circle"></i> About</a>
      <a class="text-white me-4" href="/backend/games/"><i class="bi bi-controller"></i> Games</a>
      <button class="btn btn-outline-light me-2" onclick="toggleChecklist()"><i class="bi bi-list-check"></i> Checklist</button>
      <a href="#makeBookingBtn" class="btn btn-light btn-sm fw-semibold text-dark px-3 py-1"><i class="bi bi-calendar-check"></i> Book Now</a>
    </nav>
  </div>
</header>

<div class="container">

<h2 class="text-center text-white border border-light bg-dark py-3 px-4 rounded mb-4 shadow">
  Friends Reunion Vendor Options
</h2>


  <div class="row" id="vendor-list"></div>

  <div class="text-center mt-4">
    <button id="makeBookingBtn" class="btn btn-info text-white px-4 py-2" onclick="submitBooking()">Confirm Booking</button>
  </div>
</div>

<!-- Checklist Panel --> 
 <div id="checklist" class="checklist-panel"> <h5 class="text-dark mb-3">ğŸ“‹ Selected Vendors</h5> <div id="selected-vendors"></div> <div class="mt-3"> <button class="btn btn-danger btn-sm" onclick="clearChecklist()">Clear</button> <button class="btn btn-secondary btn-sm" onclick="toggleChecklist()">Close</button> </div> </div> function updateChecklist(i) { const checklist = document.getElementById("selected-vendors"); const checkbox = document.getElementById(`vendor${i}`); const color = document.getElementById(`colorTheme${i}`).value; if (checkbox.checked) { const div = document.createElement("div"); div.id = `check${i}`; div.innerHTML = `<strong>Vendor ${i}</strong> - âœ… Selected <br><small>ğŸ¨ Theme: ${color}</small><hr>`; checklist.appendChild(div); } else { const rem = document.getElementById(`check${i}`); if (rem) rem.remove(); } }
function toggleChecklist()
 {
  document.getElementById("checklist").classList.toggle("show");
  }
<div id="aboutPopup" class="popup d-none">
  <div id="aboutText" class="about-content"></div>
  <button onclick="closeAbout()">Close</button>
</div>


<script>
const vendorNames = [
  "Hangout Decorators", "Cheers Events", "Backyard Bash", "Vibe Creators", "Memory Makers",
  "Laughter Lounge", "Campfire Nights", "Mood Lights", "Cozy Carnival", "Jolly Planners",
  "FriendZone Events", "The Bonding Bash", "Happy Hour Hub", "Chill Vibe Crew", "The Reunion Squad",
  "Party Rewind", "Throwback Themes", "Vibe & Vinyl", "Cheers & Lights", "Good Times Co.",
  "The Cozy Club", "Retro Reunions", "Laugh Lines Decor", "Buzz Bashers", "The Reunion Room",
  "GetTogether Gurus", "Peppy Planners", "Neon Vibe Nights", "Squad Goals Decor", "Mingle Makers",
  "The Nostalgia Nest", "Forever Friends Events", "CatchUp Creations", "VibeVerse Events", "The Smile Setup",
  "Groove Gatherings", "The Party Patio", "Heart & Soul Events", "F.R.I.E.N.D.S. Forever", "Reunion Radiance",
  "The Backyard Crew", "Huddle Hub", "The Meetup Makers", "Good Vibes Only", "Toast & Togetherness",
  "Connect & Celebrate", "Cheers Circle", "Squad Spark", "Mates Meet Magic", "The Glow Reunion"
];

const chennaiAreas = [
  "Adyar", "Anna Nagar", "Ashok Nagar", "Alwarpet", "Ambattur",
  "Besant Nagar", "Broadway", "Chromepet", "Choolaimedu", "Chetpet",
  "Egmore", "Ennore", "Ekkatuthangal", "Guindy", "Gopalapuram",
  "Kilpauk", "Kodambakkam", "Kotturpuram", "Koyambedu", "Kolathur",
  "Mylapore", "Mount Road", "Manapakkam", "Madipakkam", "Mandaveli",
  "Nanganallur", "Nungambakkam", "Neelankarai", "Pallavaram", "Perambur",
  "Perungudi", "Porur", "Poonamallee", "Saidapet", "Santhome",
  "Sholinganallur", "St. Thomas Mount", "Tambaram", "Teynampet", "T. Nagar",
  "Thiruvanmiyur", "Triplicane", "Vadapalani", "Velachery", "Villivakkam",
  "Vepery", "Washermanpet", "West Mambalam", "Vyasarpadi", "Royapettah"
];

const vendorsDescriptions = [
  "Ambient lighting and boho lounge setups for chill evenings.",
  "Retro themes with photo collages and memory boards.",
  "Open-air party decorators with fairy lights and fire pits.",
  "Backyard setups with music, cushions, and laughter.",
  "Themed photo booths with friends reunion captions.",
  "Neon signs, bean bags, and personalized playlist vibes.",
  "DIY activity corners with games and friendship badges.",
  "Group dining setups with long tables and cozy lights.",
  "Fairy light canopy specialists for indoor/outdoor parties.",
  "Customized friendship-themed welcome boards and props.",
  "Picnic-style brunch setups with pastel and wood tones.",
  "Boho chic dÃ©cor with rugs, lights, and vintage touch.",
  "Open terrace decorators with glow lights and drinks bar.",
  "Memories wall creators with polaroids and fairy clips.",
  "Minimalist dÃ©cor with modern touch for rooftop reunions.",
  "Campfire and storytelling setup experts.",
  "DJ-friendly setups with lighting and dance floor.",
  "Group karaoke setup and cozy stage decor.",
  "Classroom flashback themes with fun props and labels.",
  "Rustic reunion planners with food stalls and live counters.",
  "CafÃ©-style friendship corners with quote decor.",
  "Gaming + lounge zone with foosball, carrom, and arcade.",
  "Travel-themed parties for gang goals reunions.",
  "Slumber party decorators with matching cushions and mats.",
  "Dance & DJ party organizers with LED light shows.",
  "Friends-themed (TV show) decoration specialists.",
  "Low-floor sitting arrangements with candles and flowers.",
  "Open sky cinema night planners with bean bags.",
  "Reunion badges, t-shirts, and themed party props.",
  "Flashback-themed decorators with year-specific designs.",
  "Garden party planners with comfy tents and lights.",
  "Poolside reunion setups with floaties and light shows.",
  "Art & craft corners with group painting activities.",
  "Board game + snacks zone with a relaxed ambiance.",
  "Memory-sharing board setups with sticky notes.",
  "Fusion theme decorators mixing tradition & nostalgia.",
  "Bonfire night organizers with guitar and marshmallows.",
  "City-view rooftop party planners with classy touch.",
  "Cozy couch corners with mood lighting.",
  "Photo storytelling with theme-based backdrops.",
  "Candlelight floor decor and group dinner zones.",
  "Custom name boards and neon signs for each gang.",
  "Smart lighting and music sync systems for vibe.",
  "Indoor party planners with retro playlist integration.",
  "Themed cake & dessert station setup.",
  "Stand-up comedy + open mic combo decorators.",
  "Outdoor tent setups with friend-specific banners.",
  "Snapchat + Instagram booth frame props.",
  "DIY cocktail/mocktail bar and chalkboard menu signs.",
  "Firecracker and cold pyro organizers for celebrations.",
  "Eco-friendly & earthy reunion themes with natural decor."
];

const specialties = [
  "ğŸ¤ Live Music & Karaoke", "ğŸ“¸ Photo Booth Fun", "ğŸ¥ Slideshow Memories", "ğŸ® Game Zones", "ğŸ¹ Mocktail Stations",
  "ğŸ¬ Outdoor Movie Night", "ğŸ§ DJ & Dance Floor", "ğŸ”¥ Bonfire Setups", "ğŸ½ï¸ Group Dining Arrangement", "ğŸˆ Ambient Decor",
  "ğŸª‘ Cozy Low Seating", "ğŸŒƒ Rooftop Party Setup", "ğŸ•ï¸ Tent & Teepee Lounge", "ğŸ§© Team Building Games", "ğŸ• Food Truck Zones",
  "ğŸ¨ DIY Art Corners", "ğŸ“ Message Wall", "ğŸª© Disco Lighting", "ğŸ² Board Game Table", "ğŸ•¯ï¸ Candlelight Corners",
  "ğŸ« Dessert Station", "ğŸ“ Personalized Welcome Board", "ğŸ“š College Theme Flashback", "ğŸ–ï¸ Beach-Themed Decor", "ğŸ¯ Target Games",
  "ğŸ›‹ï¸ Chill Lounge Setup", "ğŸˆ Memory Balloon Drops", "ğŸ–¼ï¸ Photo Collage Wall", "ğŸ‘• Custom T-shirts/Tags", "ğŸŒ¼ Boho Picnic Style",
  "ğŸ­ Theme-based Dress Code", "ğŸ“¦ Group Gift Hampers", "ğŸª• Acoustic Jamming Area", "ğŸ“½ï¸ Polaroid Memories Spot", "ğŸ¥¤ Chill Beverage Bar",
  "ğŸ¨ Face Painting for Fun", "ğŸŒ¿ Green Garden Setup", "ğŸš€ Adventure Theme Corners", "ğŸ“€ Retro Music Setup", "ğŸµ Nostalgic Playlist Setup",
  "ğŸ’¬ Open Mic & Talks", "ğŸŒ™ Glow in the Dark Decor", "ğŸ•¹ï¸ Arcade Corner", "ğŸ‘Ÿ Dance Battle Stage", "ğŸ§ƒ Soft Drink Self-Service Bar",
  "ğŸ“· Reel & Insta Booth", "ğŸ Return Goodies Setup", "ğŸ§˜ Chill & Yoga Zone", "ğŸ¯ Ring Toss Games", "ğŸª™ Memory Coin Jars"
];
const colors = ["Red", "Blue", "Gold", "Lavender", "Orange"];
const colorMap = { Red: "#ff0000", Blue: "#0000ff", Gold: "#ffd700", Lavender: "#e6e6fa", Orange: "#ffa500" };
const vendorList = document.getElementById("vendor-list");

for (let i = 1; i <= 50; i++) {
  const name = vendorNames[i - 1] || `Vendor ${i}`;
  const area = chennaiAreas[i % chennaiAreas.length];
  const price = Math.floor(20000 + Math.random() * 30000); // â‚¹20,000 - â‚¹50,000
  const phone = `9087${Math.floor(100000 + Math.random() * 899999)}`; // Random 6-digit
  const food = i % 2 === 0 ? "Veg" : "Non-Veg";
  const rating = (Math.random() * 2 + 3).toFixed(1); // Between 3.0 and 5.0
  const specialty = specialties[i % specialties.length] || "General Catering";
  const dropdownOptions = colors.map(c => `<option style="background-color:${colorMap[c]}">${c}</option>`).join("");
  const dropdown = `<label class="form-label mt-2"><strong>ğŸ¨ Theme Colors</strong></label>
    <select class="form-select" id="colorTheme${i}">${dropdownOptions}</select>`;
  vendorList.innerHTML += `
    <div class="col-md-4">
      <div class="vendor-card p-3">

        <img src="/static/images/f${i}.jpg" alt="Vendor ${i}">
        <h5 class="mt-2 text-primary">${name}</h5>
        <p><strong>ğŸ“ Location:</strong> ${area}</p>
        <p><strong>ğŸ“ Phone:</strong> ${phone}</p>
        <p><strong>ğŸ’° Price:</strong> â‚¹${price}</p>
        <p><strong>â­ Rating:</strong> ${rating} / 5</p>
        <p><strong>ğŸ² Type:</strong> ${food}</p>
        <p><strong>ğŸ·ï¸ Specialty:</strong> ${specialty}</p>
        <div class="form-check mt-2">
           <input class="form-check-input" type="checkbox" id="vendor${i}" onclick="event.stopPropagation(); updateChecklist(${i})">
          <label class="form-check-label" for="vendor${i}">Select this Vendor</label>
        </div>
      </div>
    </div>
  `;
}

// Function to update the checklist when a vendor is selected or deselected
function updateChecklist(i) {
  const checklist = document.getElementById("selected-vendors");
  const checkbox = document.getElementById(`vendor${i}`);
  const colorDropdown = document.getElementById(`colorTheme${i}`);
  const color = colorDropdown ? colorDropdown.value : "Not Selected";

  if (checkbox.checked) {
    const div = document.createElement("div");
    div.id = `check${i}`;
    div.innerHTML = `<strong>Vendor ${i}</strong> - âœ… Selected <br><small>ğŸ¨ Theme: ${color}</small><hr>`;
    checklist.appendChild(div);
  } else {
    const toRemove = document.getElementById(`check${i}`);
    if (toRemove) toRemove.remove();
  }
}

// Function to toggle the visibility of the checklist panel
function toggleChecklist() {
  const checklist = document.getElementById("checklist");
  checklist.classList.toggle("show");
}

// Function to clear the checklist and uncheck all vendors
function clearChecklist() {
  for (let i = 1; i <= 50; i++) {
    const checkbox = document.getElementById(`vendor${i}`);
    if (checkbox) checkbox.checked = false;

    const div = document.getElementById(`check${i}`);
    if (div) div.remove();
  }
}

// Function to handle booking submission
function submitBooking() {
  const selectedVendors = [];

  for (let i = 1; i <= 50; i++) {
    const checkbox = document.getElementById(`vendor${i}`);
    if (checkbox && checkbox.checked) {
      const card = checkbox.closest(".vendor-card");
      const name = card.querySelector("h5").innerText;
      const location = card.querySelector("p:nth-of-type(1)").innerText.replace("ğŸ“ Location: ", "");
      const phone = card.querySelector("p:nth-of-type(2)").innerText.replace("ğŸ“ Phone: ", "");
      const priceText = card.querySelector("p:nth-of-type(3)").innerText;
      const price = parseInt(priceText.replace(/[^\d]/g, ""));
      const colorDropdown = document.getElementById(`colorTheme${i}`);
      const color = colorDropdown ? colorDropdown.value : "Not Selected";

      selectedVendors.push({ name, location, phone, price, color });
    }
  }

  if (selectedVendors.length === 0) {
    alert("âš ï¸ Please select at least one vendor!");
    return;
  }

  // Save selected vendors to localStorage
  localStorage.setItem("selectedVendors", JSON.stringify(selectedVendors));
  alert("ğŸ‰ Booking confirmed! Redirecting to summary page...");
  window.location.href = "/backend/bookingthree/"; // Redirect to the booking summary page
}



function submitBooking() {
  const selectedVendors = [];

  for (let i = 1; i <= 10; i++) {
    const checkbox = document.getElementById(`vendor${i}`);
    if (checkbox && checkbox.checked) {
      const card = checkbox.closest(".vendor-card");
      const name = card.querySelector("h5").innerText;
      const location = card.querySelector("p:nth-of-type(1)").innerText.replace("ğŸ“ Location: ", "");
      const phone = card.querySelector("p:nth-of-type(2)").innerText.replace("ğŸ“ Phone: ", "");
      const priceText = card.querySelector("p:nth-of-type(3)").innerText;
      const price = parseInt(priceText.replace(/[^\d]/g, ""));

      selectedVendors.push({ name, location, phone, price });
    }
  }

  if (selectedVendors.length === 0) {
    alert("âš ï¸ Please select at least one vendor!");
    return;
  }

  localStorage.setItem("selectedVendors", JSON.stringify(selectedVendors));
  alert("ğŸ‰ Booking confirmed! Redirecting to summary page...");
  window.location.href = "/backend/bookingthree/";
}

function openAbout() {
  const popup = document.getElementById("aboutPopup");
  const aboutText = document.getElementById("aboutText");
  popup.classList.remove("d-none");

  const message = "Welcome to the Friends Reunion Booking Page! ğŸ‘«ğŸ’¬\n\nRekindle old memories and plan your unforgettable get-together with ease. Explore cozy venues, delicious food, and charming decorations that bring your crew back together! ğŸŠğŸ“¸";
  aboutText.innerHTML = "";
  
  let index = 0;

  function typeNextChar() {
    if (index < message.length) {
      aboutText.innerHTML += message[index] === '\n' ? '<br>' : message[index];
      index++;
      setTimeout(typeNextChar, 40); // Speed of typing
    }
  }

  typeNextChar();
}

function closeAbout() {
  document.getElementById("aboutPopup").classList.add("d-none");
}

</script>

</body>
</html>
