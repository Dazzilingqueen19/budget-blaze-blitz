{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Farewell Vendor Booking</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
 
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: url('{% static "assets/far.jpg" %}') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Segoe UI', sans-serif;
    }
    html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}
    .glass-header {
  background: rgba(255, 255, 255, 0.15); /* transparent */
  backdrop-filter: blur(8px);
  color: white;
  z-index: 10;
}

    .glass-header h3, .glass-header a {
      text-shadow: 0 0 8px #ffbf00;
    }
    #bgVideo {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  object-fit: cover;
  z-index: -10;  /* keep it far behind all other elements */
  opacity: 1;    /* 1 = full visibility; reduce if too bright */
  pointer-events: none; /* allows clicks through video */
}


    .vendor-card {
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      background-color: #ffffffcc;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      font-size: 14px;
    }

    .vendor-card:hover {
      transform: scale(1.03);
      box-shadow: 0 0 15px #ffbf00;
      cursor: pointer;
    }

    .vendor-card img {
      width: 100%;
      aspect-ratio: 1 / 1;
      object-fit: cover;
      border-radius: 8px;
    }

    .checklist-panel {
      position: fixed;
      top: 0;
      right: -400px;
      width: 350px;
      height: 100%;
      background: url('{% static "images/bg5.jpg" %}') no-repeat center center fixed;
      background-size: cover;
      border-left: 2px solid #ccc;
      box-shadow: -2px 0 10px rgba(0,0,0,0.1);
      padding: 20px;
      transition: right 0.4s ease-in-out;
      overflow-y: auto;
      z-index: 999;
      backdrop-filter: blur(10px);
    }

    .checklist-panel.show {
      right: 0;
    }

    .glass-input {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(8px);
      border: 1px solid #fff;
      color: #fff;
    }

    .glass-input::placeholder {
      color: #eeeeee;
    }

    .popup-glass {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      backdrop-filter: blur(8px);
      background: rgba(0, 0, 0, 0.6);
      z-index: 2000;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .vendor-card {
  margin-bottom: 20px; /* Adds space between rows */
}

    .popup-content {
      background: linear-gradient(145deg, #ffffffdd, #f0f8ffdd);
      border-radius: 20px;
      padding: 30px;
      width: 90%;
      max-width: 600px;
      color: #333;
      font-size: 16px;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <header class="glass-header p-3 mb-4">
    <div class="container d-flex justify-content-between align-items-center">
      <h3><i class="bi bi-people-fill"></i> Farewell</h3>
      <nav>
        <a class="text-white me-4" href="/backend/home/"><i class="bi bi-house-door"></i> Home</a>
        <a class="text-white me-4" href="javascript:void(0);" onclick="openAbout()"><i class="bi bi-info-circle"></i> About</a>
        <a class="text-white me-4" href="/backend/games/"><i class="bi bi-controller"></i> Games</a>
        <button class="btn btn-outline-light me-2" onclick="toggleChecklist()"><i class="bi bi-list-check"></i> Checklist</button>
        <a href="#makeBookingBtn" class="btn btn-light btn-sm fw-semibold text-dark px-3 py-1"><i class="bi bi-calendar-check"></i> Book Now</a>
      </nav>
    </div>
  </header>
<!-- üîπ Background Video -->
<video autoplay muted loop id="bgVideo">
    <source src="{% static 'assets/background.mp4' %}" type="video/mp4">
    Your browser does not support HTML5 video.
  </video>

<!-- About Popup -->
<div id="aboutPopup" class="popup-glass d-none">
  <div class="popup-content">
    <h4 class="text-center">üéì About Farewell Page</h4>
    <p id="aboutText" class="mt-3"></p>
    <div class="text-center mt-4">
      <button class="btn btn-outline-dark" onclick="closeAbout()">üîô Back</button>
    </div>
  </div>
</div>



<!-- Vendor Cards -->
<div class="container">
  <h2 class="text-center text-light mb-4">Farewell Vendor Options</h2>
  <div class="row" id="vendor-list"></div>
  <div class="text-center mt-4">
    <button id="makeBookingBtn" class="btn btn-warning booking-btn" onclick="submitBooking()">Make Booking</button>
  </div>
</div>

<!-- Checklist Panel -->
<div id="checklist" class="checklist-panel">
  <h4>üìù Selected Vendors</h4>
  <div id="selected-vendors"></div>
  <div class="mt-3">
    <button class="btn btn-danger btn-sm" onclick="clearChecklist()">Clear</button>
    <button class="btn btn-secondary btn-sm" onclick="toggleChecklist()">Back</button>
  </div>
</div>
<script type="text/javascript">
  (function(d, t) {
      var v = d.createElement(t), s = d.getElementsByTagName(t)[0];
      v.onload = function() {
        window.voiceflow.chat.load({
          verify: { projectID: '680c7f66ad1fd33749d57a4a' },
          url: 'https://general-runtime.voiceflow.com',
          versionID: 'production',
          voice: {
            url: "https://runtime-api.voiceflow.com"
          }
        });
      }
      v.src = "https://cdn.voiceflow.com/widget-next/bundle.mjs"; v.type = "text/javascript"; s.parentNode.insertBefore(v, s);
  })(document, 'script');
</script>
<script>
// Farewell-specific data
const vendorsNames = [
  "Goodbye Glam", "Farewell Moments", "Parting Vibes", "Memory Makers", "Last Day Legends",
  "Cheers & Tears", "Finale Flair", "The Send-Off Co.", "Exit Elegance", "Grad & Goodbye",
  "Moments & Memories", "Farewell Frames", "Golden Goodbye", "ByeBye Bash", "The Recall Room",
  "Signature Sendoff", "Sweet Memories Decor", "Goodbye Glow", "The Last Toast", "The Parting Touch",
  "Memory Lane Events", "Forever Farewells", "Echo Events", "Reminisce Royale", "Wave Off Wonders",
  "The Flashback Co.", "The Final Bow", "Nostalgia Nights", "Parting Petals", "Off You Go Events",
  "Hug & Wave", "Memory Makers Guild", "Bid Adieu Events", "Curtain Call Creations", "The Last Chapter",
  "Lights Off Events", "Remind Me Decor", "Sendoff Scene", "Golden Hour Moments", "Gone But Glowing",
  "Remember Me Events", "Soulful Sendoff", "Cherish Chapters", "Leaving Lane", "The Goodbye Gala",
  "Backdrop to Beyond", "The Flashback Story", "Caps & Cheers", "So Long Soirees", "Bon Voyage Vibes"
];

const vendorsDescriptions = [
  "Expert decor for school and college farewell parties.", "Elegant stage designs for heartfelt send-offs.",
  "Customized backdrop with goodbye quotes and hashtags.", "Photobooth setups with farewell-themed props.",
  "Balloon arches and memory boards for nostalgia vibes.", "Decorative displays with year-wise flashbacks.",
  "Mood lighting and farewell countdown displays.", "Goodbye banners with personalized student names.",
  "Live DJ and music setup for parting celebrations.", "Floral entryways with sparkler greetings.",
  "Memory lane decor with hanging photo frames.", "Scroll banners with farewell wishes from friends.",
  "Customized invitation cards and send-off tokens.", "Graduation cap and scroll prop decorations.",
  "Themed decor for corporate farewell parties.", "Motivational quote walls and lightboxes.",
  "Selfie stations and social wall setups.", "Animated slideshow booths for memories.",
  "Red carpet farewell entrance with spotlight.", "Yearbook-style backdrop and goodbye quotes.",
  "Stage lighting synced with music & speeches.", "Decor fusion with career-themed props.",
  "Golden farewell arches with balloon clusters.", "Live sketching and caricature corners.",
  "Floating memory jars and farewell pebbles corner.", "Customized farewell photo albums table.",
  "Wall-of-fame decor for top memories & milestones.", "Emotional message boards and signature trees.",
  "Outdoor lawn setups with fairy lights and paper lamps.", "Flower shower goodbye moments for honorees.",
  "Drape hangings with class photos and quotes.", "3D 'FAREWELL' letter structures for center decor.",
  "LED display with old memories & class videos.", "Time capsule creation corner with student items.",
  "Tassel curtain backdrops with balloon bunches.", "Mini stage decor with mic stand and memory rolls.",
  "Chair ribbons with personal messages on each.", "Themed centerpieces with academic icons.",
  "Flickering candle corners with goodbye cards.", "Professional photo & videography team setups.",
  "Speech podium decor with farewell lighting.", "Floating lantern release coordination.",
  "Indoor projector screening zone for group memories.", "Corporate desk memory layouts & banners.",
  "Confetti blast moment setup during final walk.", "Name-tag wall with custom farewell wishes.",
  "Thank-you scrolls & surprise group gifts table.", "Infinity mirror farewell tunnel lighting.",
  "Classic black and gold themed decor elements.", "Social media live stream-ready stage setup."
];
const specialties = [
  "üéì Graduation Cap Decor",
  "üé§ Emotional Speech Setup",
  "üì∏ Farewell Photo Booth",
  "üßæ Memory Wall Creation",
  "üé∂ Background Music & DJ",
  "üéà Balloon Arch Entry",
  "üí° Spotlit Stage Decor",
  "ü™ë Chair Ribbon Styling",
  "üìù Message Card Corners",
  "üåü Spotlight Walk Entry",
  "üïØÔ∏è Candlelight Memory Lane",
  "üìπ Slideshow Memories Screen",
  "üß∏ Farewell Token Display",
  "üå∏ Floral Stage Background",
  "üéÅ Goodbye Gift Station",
  "üìú Scroll of Good Wishes",
  "üì∑ Instant Polaroid Booth",
  "üñºÔ∏è Frame Wall for Selfies",
  "üåà Themed Color Decor",
  "ü™Ñ Magic Curtain Exit",
  "üéÄ Ribbon Walkway Setup",
  "üéá Cold Fireworks Effect",
  "ü™µ Rustic Backdrop Elements",
  "üìñ Yearbook-Style Backdrop",
  "üåÖ Sunset Outdoor Setup",
  "üí¨ Open Mic Goodbye Zone",
  "üõéÔ∏è Thank You Bell Display",
  "üé≠ Dramatic Lighting Effects",
  "üéì Cap Toss Countdown",
  "üé• Video Montage Wall",
  "ü™ß Personal Quote Signboards",
  "üì¶ Memory Box Drop Station",
  "üéâ Confetti Farewell Finale",
  "üßÅ Sweet Treat Corner",
  "üñçÔ∏è Doodle Memory Board",
  "üé§ Live Band or Karaoke",
  "üèµÔ∏è Farewell Badge Distribution",
  "üïäÔ∏è Dove Release Moment",
  "üéûÔ∏è LED Name Roll Credits",
  "üåå Starry Sky Ceiling Decor",
  "ü™î Classic Oil Lamp Setup",
  "üå∫ Farewell Floral Path",
  "üéè Hanging Decor Lanterns",
  "üéá Indoor Sparkle Shower",
  "üì∏ Final Group Photo Zone",
  "üé≠ Theme Mask Distribution",
  "üìø Quote Bead Chain Display",
  "üìç Location Pins for Memories",
  "ü™© Retro Music Farewell Mix",
  "üì¨ Letter to Future Box"
];

const areas = ["Guindy", "T.Nagar", "Velachery", "Adyar", "Anna Nagar"];
const colors = ["Red", "Blue", "Gold", "Lavender", "Orange"];
const colorMap = { Red: "#ff0000", Blue: "#0000ff", Gold: "#ffd700", Lavender: "#e6e6fa", Orange: "#ffa500" };

const vendorList = document.getElementById("vendor-list");

// Generate vendor cards dynamically
for (let i = 1; i <= 50; i++) {
  const name = vendorsNames[(i - 1) % vendorsNames.length];
  const description = vendorsDescriptions[(i - 1) % vendorsDescriptions.length]; // Add vendor descriptions
  const location = areas[i % areas.length];
  const phone = `98888${10000 + i}`;
  const price = 10000 + i * 500; // Incremental pricing
  const rating = (Math.random() * 2 + 3).toFixed(1); // Random rating between 3.0 and 5.0
  const foodType = i % 2 === 0 ? "Veg" : "Non-Veg"; // Alternate between Veg and Non-Veg
  const specialty = specialties[i % specialties.length]; // Add specialties

  // Dropdown options for color themes
  const dropdownOptions = colors.map(c => `<option style="background:${colorMap[c]}">${c}</option>`).join("");
  const dropdown = `<label class="form-label mt-2"><strong>üé® Theme Colors</strong></label>
                    <select class="form-select" id="colorTheme${i}">${dropdownOptions}</select>`;

  vendorList.innerHTML += `
    <div class="col-md-4">
      <div class="vendor-card p-3">
        <img src="/static/images/far${i}.jpg" alt="Vendor ${i}" class="img-fluid rounded">
        <h5 class="mt-3 text-primary">${name}</h5>
        <p class="text-muted">${description}</p> <!-- Add description -->
        <p><strong>üìç Location:</strong> ${location}</p>
        <p><strong>üìû Phone:</strong> ${phone}</p>
        <p><strong>üí∞ Price:</strong> ‚Çπ${price}</p>
        <p><strong>‚≠ê Rating:</strong> ${rating} / 5</p>
        <p><strong>üè∑Ô∏è Specialty:</strong> ${specialty}</p>
        <p><strong>üç± Type:</strong> ${foodType}</p>
        ${dropdown}
        <div class="form-check mt-2">
          <input class="form-check-input" type="checkbox" id="vendor${i}" onclick="event.stopPropagation(); updateChecklist(${i})">
          <label class="form-check-label" for="vendor${i}">Select this Vendor</label>
        </div>
      </div>
    </div>`;
}

function updateChecklist(i) {
  const checklist = document.getElementById("selected-vendors");
  const cb = document.getElementById(`vendor${i}`);
  const color = document.getElementById(`colorTheme${i}`).value;
  if (cb.checked) {
    const div = document.createElement("div");
    div.id = `check${i}`;
    div.innerHTML = `<strong>Vendor ${i}</strong> - ‚úÖ Selected <br><small>üé® Theme: ${color}</small><hr>`;
    checklist.appendChild(div);
  } else {
    const remove = document.getElementById(`check${i}`);
    if (remove) remove.remove();
  }
}

function toggleChecklist() {
  document.getElementById("checklist").classList.toggle("show");
}

function clearChecklist() {
  for (let i = 1; i <= 50; i++) {
    const cb = document.getElementById(`vendor${i}`);
    if (cb) cb.checked = false;
    const div = document.getElementById(`check${i}`);
    if (div) div.remove();
  }
}

// Function to handle booking submission
function submitBooking() {
  const selectedVendors = [];
  for (let i = 1; i <= 50; i++) {
    const checkbox = document.getElementById(`vendor${i}`);
    if (checkbox && checkbox.checked) {
      const card = checkbox.closest(".vendor-card");
      const name = card.querySelector("h5").innerText;
      const location = card.querySelector("p:nth-of-type(2)").innerText.replace("üìç Location: ", "");
      const phone = card.querySelector("p:nth-of-type(3)").innerText.replace("üìû Phone: ", "");
      const priceText = card.querySelector("p:nth-of-type(4)").innerText;
      const price = parseInt(priceText.replace(/[^\d]/g, ""));
      const color = document.getElementById(`colorTheme${i}`).value; // Get selected theme color
      selectedVendors.push({ name, location, phone, price, color });
    }
  }

  if (selectedVendors.length === 0) {
    alert("‚ö†Ô∏è Please select at least one vendor!");
    return;
  }
   // Save selected vendors to localStorage
   localStorage.setItem("selectedVendors", JSON.stringify(selectedVendors));
  alert("üéâ Booking confirmed! Redirecting to summary page...");
  window.location.href = "/backend/bookingfour/"; // Redirect to farewell booking summary page
}

function openAbout() {
  const popup = document.getElementById("aboutPopup");
  const aboutText = document.getElementById("aboutText");
  popup.classList.remove("d-none");

  const message = "Welcome to the Farewell Party Booking Page! üéà\n\nHere, you can discover thoughtful vendor options, explore memorable decoration ideas, and create a heartfelt send-off for your loved ones. Let‚Äôs make it unforgettable! üåüüëã";
  aboutText.innerHTML = "";
  
  let index = 0;

  function typeNextChar() {
    if (index < message.length) {
      aboutText.innerHTML += message[index] === '\n' ? '<br>' : message[index];
      index++;
      setTimeout(typeNextChar, 40); // Speed of typing
    }
  }

  typeNextChar();
}

function closeAbout() {
  document.getElementById("aboutPopup").classList.add("d-none");
}
</script>
</body>
</html>
